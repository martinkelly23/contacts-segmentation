<% if user_signed_in? %>
<div class="container">
  <form action="/filter" method="post" >
    <div class="row">
      <div class="col-6 col-md-4">
        <div class="form-group">
          <label for="select1">Column</label>
          <select class="form-control" id="select1" name="select1">
            <option> name </option>
            <option> email </option>
            <option> age </option>
            <option> state </option>
            <option> job </option>
          </select>
        </div>
        <div class="form-group">
          <label for="select2">Operator</label>
          <select class="form-control" id="select2" name="select2">
            <option>same as</option>
            <option>contains</option>
            <option>begins with</option>
            <option>ends with</option>
          </select>
        </div>
        <div class="form-group">
          <label for="input1">Value</label>
          <input type="text" class="form-control" id="input1" name="input1">
        </div>
      </div>
      <div class="col-6 col-md-4">
        <div class="form-group">
          <label for="select1">Logical operator</label>
          <select class="form-control" id="select3" name="select3">
            <option selected>Select one logical operator</option>
            <option> AND </option>
            <option> OR </option>
          </select>
        </div>
      </div>
      <div class="col-6 col-md-4">
        <div class="form-group">
          <label for="select3">Column</label>
          <select class="form-control" id="select4" name="select4" disabled = 'true'>
            <option> name </option>
            <option> email </option>
            <option> age </option>
            <option> state </option>
            <option> job </option>
          </select>
        </div>
        <div class="form-group">
          <label for="select4">Operator</label>
          <select class="form-control" id="select5" name="select5" disabled = 'true'>
            <option>same as</option>
            <option>contains</option>
            <option>begins with</option>
            <option>ends with</option>
          </select>
        </div>
        <div class="form-group">
          <label for="input">Value</label>
          <input type="text" class="form-control" id="input2" name="input2" disabled = 'true'>
        </div>
      </div>
    </div>
    <input name="commit" type="submit" value="Search" />
  </form>


  <h1>Resultado: </h1>
  <table class= "table table-hover">
    <thead>
      <tr>
        <th> Name </th>
        <th> Email </th>
        <th> Age </th>
        <th> State </th>
        <th> Job </th>
      </tr>
    </thead>
    <tbody>
      <% @users.each do |usuario| %>
        <tr>
          <td> <%= usuario.name %> </td>
          <td> <%= usuario.email %> </td>
          <td> <%= usuario.age %> </td>
          <td> <%= usuario.state %> </td>
          <td> <%= usuario.job %> </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>

<% else %>
<h1>Algo para usuarios no registrados que ingresen al sistema...</h1>
<% end %>

<script>
  document.getElementById("select1").onchange = function() {operator()};
  function operator() {
      if(document.getElementById("select1").selectedIndex == 2){
        $("#select2").empty();
        $("#select2").append('<option>equal to</option>');
        $("#select2").append('<option>less than</option>');
        $("#select2").append('<option>less than or equal to</option>');
        $("#select2").append('<option>greater than</option>');
        $("#select2").append('<option>greater than or equal to</option>');

        document.getElementById('input1').type = 'number';
      }
      else{
        $("#select2").empty();
        $("#select2").append('<option>same as</option>');
        $("#select2").append('<option>contains</option>');
        $("#select2").append('<option>begins with</option>');
        $("#select2").append('<option>greater than</option>');
        $("#select2").append('<option>ends with</option>');

        document.getElementById('input1').type = 'text';
      }
  }

  document.getElementById("select3").onchange = function() {logicOperator()};
  function logicOperator() {
    $("#select4").prop('disabled', false);
    $("#select5").prop('disabled', false);
    $("#input2").prop('disabled', false);
  }

</script>
